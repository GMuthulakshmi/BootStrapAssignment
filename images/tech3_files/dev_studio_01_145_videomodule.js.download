self.studioLoader.context.evalInContext("var Wm=function(a){return(a=a.exec(tb))?a[1]:\"\"};(function(){if(Sh)return Wm(/Firefox\\/([0-9.]+)/);if(C||gc||fc)return qc;if(Wh)return Wm(/Chrome\\/([0-9.]+)/);if(Xh&&!(bc()||A(\"iPad\")||A(\"iPod\")))return Wm(/Version\\/([0-9.]+)/);if(Th||Uh){var a=/Version\\/(\\S+).*Mobile\\/(\\S+)/.exec(tb);if(a)return a[1]+\".\"+a[2]}else if(Vh)return(a=Wm(/Android\\s+([0-9.]+)/))?a:Wm(/Version\\/([0-9.]+)/);return\"\"})();var Xm={},Ym=/OS (\\S+) like/,Zm=/Android (\\S+);/,$m=function(a,b){null==Xm[b]&&((a=a.exec(tb))?(a=a[1].replace(/_/g,\".\"),Xm[b]=0<=Ja(a,b)):Xm[b]=!1);return Xm[b]};var an=function(){J.call(this);this.c=!1;this.I=D(\"ima.legacy.common.MouseAndTouchEventTracker\");this.f=this.h=!1;this.b=0;this.i=[];this.m=!1};w(an,J);var bn=function(a,b){null==b||a.c||(a.a=b,a.v=!Th&&!Uh,a.s=Th||Uh,a.v?a.a.addEventListener(\"click\",u(a.j,a),!1):a.s?(a.a.addEventListener(\"touchstart\",u(a.L,a),!1),a.a.addEventListener(\"touchmove\",u(a.M,a),!1),a.a.addEventListener(\"touchend\",u(a.B,a),!1)):Pc(a.I,\"Neither click nor touch is supported in this platform.\"),a.c=!0)},cn=function(a){null!=a.a&&a.c&&(a.c=!1,a.v?a.a.removeEventListener(\"click\",u(a.j,a),!1):a.s&&(a.a.removeEventListener(\"touchstart\",u(a.L,a),!1),a.a.removeEventListener(\"touchmove\",u(a.M,a),!1),a.a.removeEventListener(\"touchend\",u(a.B,a),!1)))};an.prototype.L=function(a){this.h=!0;this.b=a.touches.length;this.m=dn(this,a.touches)||1!=a.touches.length;en(this,a.touches)};an.prototype.M=function(a){this.f=!0;this.b=a.touches.length};an.prototype.B=function(a){this.h&&1==this.b&&!this.f&&!this.m&&dn(this,a.changedTouches)&&this.dispatchEvent(new le(\"click\"));this.b=a.touches.length;0==this.b&&(this.f=this.h=!1)};an.prototype.j=function(){this.dispatchEvent(new le(\"click\"))};var en=function(a,b){a.i=[];z(b,function(a){var b=this.i;a=a.identifier;0<=Ta(b,a)||b.push(a)},a)},dn=function(a,b){return Va(b,function(a){return 0<=Ta(this.i,a.identifier)},a)};var fn=function(a){le.call(this,a)};w(fn,le);var gn=function(){J.call(this)};w(gn,J);var hn=function(){J.call(this);this.i=D(\"ima.legacy.vast.VideoDisplayEventTracker\");this.f=new B;this.j=new an;this.m=\"none\"};w(hn,J);var ln=function(a){this.width=jn(a).width;this.height=jn(a).height;this.c=!1;this.b=a.a.muted;this.a=kn(a);this.volume=a.a.volume};ln.prototype.muted=function(a,b){return!this.b&&a||0<this.volume&&0==b};hn.prototype.l=function(){mn(this);hn.o.l.call(this)};var mn=function(a){null!=a.b&&a.b.dispose();null!=a.h&&a.h.dispose();null!=a.a&&nn(a.a);Vb(a.f);cn(a.j)},Z=function(a,b,c){c&&null!=a.f.get(b)||(a.f.set(b,!0),F(a.i,\"dispatching event \"+b),a.dispatchEvent(new fn(b)))},on=function(a,b){null!=a.f.get(b)&&(F(a.i,\"removing event \"+b),Wb(a.f,b))};g=hn.prototype;g.Kd=function(){var a;a:{var b=this.a;if(b.a.seeking&&!b.h)b.h=!0,b.i=pn(b);else{if(!b.a.seeking&&b.h){b.h=!1;a=0!=b.a.currentTime&&b.a.currentTime<b.i;b.i=-1;break a}if(!b.a.seeking&&0!=b.a.currentTime&&pn(b)>b.a.currentTime){a=.5<pn(b)-b.a.currentTime;break a}}a=!1}b=qn(this.a);if(a&&(Z(this,\"rewind\",!1),-1!=b)){rn(this.a,.75*b)||on(this,\"thirdquartile\");rn(this.a,.5*b)||on(this,\"midpoint\");rn(this.a,.25*b)||on(this,\"firstquartile\");a:{a=this.a;for(var c=a.c.H(),d=c.length-1;0<=d;d--)if(.5>c[d]){c=a.c;c=0==c.U()?null:c.get(c.U()-1);d=a.c;d.a.length=0;d.b=0;.5<=c&&a.c.add(c);a=!0;break a}a=!1}a&&Z(this,\"replay\",!1)}-1!=b&&(rn(this.a,.25*b)&&Z(this,\"firstquartile\",!0),rn(this.a,.5*b)&&Z(this,\"midpoint\",!0),rn(this.a,.75*b)&&Z(this,\"thirdquartile\",!0))};g.Jd=function(){Z(this,\"creativeview\",!0);null!=this.v?(this.b.u(this.j,\"click\",this.Fd,!1),bn(this.j,this.v)):this.b.u(this.a,\"click\",this.le);Z(this,\"start\",!0);(this.a.a.muted||0==this.a.a.volume)&&Z(this,\"mute\",!1)};g.Ld=function(){var a=this.a.a.muted,b=this.a.a.volume,c=this.c;c.b&&!a||!a&&0==c.volume&&0<b?Z(this,\"unmute\",!1):this.c.muted(a,b)&&Z(this,\"mute\",!1);this.c.b=a;this.c.volume=b};g.Id=function(){if(this.a.a.ended)Z(this,\"complete\",!0);else{var a;if(a=\"pausedAtBeginning\"==this.m)a=this.a,a=!isNaN(a.a.duration)&&0<a.a.duration&&0==a.a.currentTime;a?Z(this,\"stop\",!0):sn(this.a)&&!this.a.a.seeking&&(this.c.c=!0,Z(this,\"pause\",!1))}};g.ke=function(){this.c.c&&(this.c.c=!1,Z(this,\"resume\",!1))};g.Gd=function(){var a;a=this.a;if(!Vh||Vh&&$m(Zm,2.3))a=!0;else{var b=a.a.duration-pn(a);a=0==a.a.currentTime&&1.5>=b}a?\"pausedAtEnd\"==this.m&&sn(this.a)?Z(this,\"stop\",!0):Z(this,\"complete\",!0):(F(this.i,\"Pausing video..\"),this.a.a.pause())};g.Fd=function(){Z(this,\"click\",!1)};g.Hd=function(){Z(this,\"error\",!1)};g.le=function(){Z(this,\"click\",!1)};g.cc=function(){this.c.a=!0;Z(this,\"fullscreen\",!1)};g.bc=function(){this.c.a=!1};g.je=function(){var a=jn(this.a),b=kn(this.a),c=this.c;if(a.width!=c.width||a.height!=c.height)!this.c.a&&b?this.cc():this.c.a&&!b&&this.bc(),this.c.width=a.width,this.c.height=a.height};var tn=function(a){this.b=0;this.c=a||100;this.a=[]};g=tn.prototype;g.add=function(a){var b=this.a[this.b];this.a[this.b]=a;this.b=(this.b+1)%this.c;return b};g.get=function(a){a=un(this,a);return this.a[a]};g.set=function(a,b){a=un(this,a);this.a[a]=b};g.U=function(){return this.a.length};g.H=function(){for(var a=this.U(),b=this.U(),c=[],a=this.U()-a;a<b;a++)c.push(this.get(a));return c};g.O=function(){for(var a=[],b=this.U(),c=0;c<b;c++)a[c]=c;return a};g.R=function(a){return a<this.U()};g.Aa=function(a){for(var b=this.U(),c=0;c<b;c++)if(this.get(c)==a)return!0;return!1};var un=function(a,b){if(b>=a.a.length)throw Error(\"Out of bounds exception\");return a.a.length<a.c?b:(a.b+Number(b))%a.c};D(\"ima.legacy.common.ErrorUtils\");var vn=function(a){J.call(this);this.a=a;this.c=new tn(4);this.i=-1;this.j=this.h=!1};w(vn,gn);var qn=function(a){return isNaN(a.a.duration)?-1:a.a.duration},sn=function(a){return a.a.paused?Th||Uh||Wh?a.a.currentTime<a.a.duration:!0:!1},kn=function(a){return Th?a.a.webkitSupportsFullscreen&&a.a.webkitDisplayingFullscreen:a.a.offsetWidth>=document.body.offsetWidth&&a.a.offsetHeight>=document.body.offsetHeight},rn=function(a,b){return pn(a)>=b},pn=function(a){for(a=a.c.H();a.length;){var b=a.pop();if(0<b)return b}return-1},jn=function(a){return new Rc(a.a.offsetWidth,a.a.offsetHeight)};vn.prototype.l=function(){vn.o.l.call(this);nn(this)};var nn=function(a){null!=a.f&&(cn(a.f),a.f=null);null!=a.b&&(a.b.dispose(),a.b=null);a.i=-1;a.j=!1;a.h=!1;a=a.c;a.a.length=0;a.b=0},wn=function(a){a.j||(a.j=!0,a.dispatchEvent(\"start\"),!Vh&&(!Th||(Th||Uh)&&$m(Ym,4))||a.dc())};g=vn.prototype;g.ie=function(){Xh&&(this.a.currentTime=.001)};g.jc=function(){this.dispatchEvent(\"play\");Th||Uh||wn(this)};g.Rd=function(){this.j||((Th||Uh)&&0<this.a.currentTime&&wn(this),ic&&this.jc());this.c.add(this.a.currentTime);this.dispatchEvent(\"timeUpdate\")};g.Sd=function(){this.dispatchEvent(\"volumeChange\")};g.Qd=function(){this.dispatchEvent(\"pause\")};g.Nd=function(){this.dispatchEvent(\"end\")};g.dc=function(){this.dispatchEvent(\"beginFullscreen\")};g.Pd=function(){this.dispatchEvent(\"endFullscreen\")};g.Od=function(){this.dispatchEvent(\"error\")};g.Md=function(){this.dispatchEvent(\"click\")};var xn={},yn=function(a){this.F=a;this.f=this.g=!0;this.c=new hn;this.c.m=\"pausedAtBeginning\";this.i=this.a=this.b=null;kj(u(this.v,this))},zn=new B;yn.prototype.m=!1;yn.prototype.j=!1;yn.prototype.h=!0;var An=function(a){var b=zn.get(a);null==b&&(b=new yn(a),zn.set(a,b));return b};yn.prototype.v=function(a){this.a=a;Bn(this)};var Bn=function(a){Cn(a,!1);Cn(a,!0);if(null!=a.a&&null!=a.i){var b=a.c,c=a.b;mn(b);b.a=c;c=b.a;nn(c);c.b=new Wf(c);c.b.u(c.a,\"canplay\",c.ie);c.b.u(c.a,\"ended\",c.Nd);c.b.u(c.a,\"webkitbeginfullscreen\",c.dc);c.b.u(c.a,\"webkitendfullscreen\",c.Pd);c.b.u(c.a,\"pause\",c.Qd);c.b.u(c.a,\"playing\",c.jc);c.b.u(c.a,\"timeupdate\",c.Rd);c.b.u(c.a,\"volumechange\",c.Sd);c.b.u(c.a,\"error\",c.Od);c.f=new an;c.b.u(c.f,\"click\",c.Md,!1);bn(c.f,c.a);b.c=new ln(b.a);b.v=null;b.b=new Wf(b);b.b.u(b.a,\"timeUpdate\",b.Kd,!1);b.b.u(b.a,\"volumeChange\",b.Ld,!1);b.b.u(b.a,\"pause\",b.Id,!1);b.b.u(b.a,\"play\",b.ke,!1);b.b.u(b.a,\"end\",b.Gd,!1);b.b.u(b.a,\"beginFullscreen\",b.cc,!1);b.b.u(b.a,\"endFullscreen\",b.bc,!1);b.b.u(b.a,\"start\",b.Jd,!1);b.b.u(b.a,\"error\",b.Hd,!1);b.h=new Ve(1E3);Yf(b.b,b.h,\"tick\",b.je,!1,b);b.h.start();a.b.u(\"timeUpdate\",a.Ec,!1,a);a.i.paused?a.c.u(\"start\",a.Ra,!1,a):a.Ra()}},Cn=function(a,b){Dn(a,b,\"resume\",a.Ra);Dn(a,b,\"replay\",a.qe);Dn(a,b,\"pause\",a.ne);Dn(a,b,\"stop\",a.De);Dn(a,b,\"mute\",a.he);Dn(a,b,\"unmute\",a.Le);Dn(a,b,\"firstquartile\",a.ad);Dn(a,b,\"midpoint\",a.fe);Dn(a,b,\"thirdquartile\",a.Je);Dn(a,b,\"complete\",a.Pc)},Dn=function(a,b,c,d){(b?a.c.u:a.c.ca).call(a.c,c,d,!1,a)};g=yn.prototype;g.Ra=function(){this.c.ca(\"start\",this.Ra,!1,this);En(this,\"play\",!this.h);Fn(this,\"Start\");this.h=!1;null!=this.a&&this.f&&!this.m&&(this.a.m(),this.m=!0)};g.qe=function(){En(this,\"replay\",!0);Fn(this,\"Stop\");this.g=!1};g.ne=function(){En(this,\"pause\",!0);Fn(this,\"Stop\")};g.De=function(){En(this,\"stop\",!0);Fn(this,\"Stop\");this.g=!1};g.he=function(){En(this,\"mute\",!this.h)};g.Le=function(){En(this,\"unmute\",!this.h)};g.ad=function(){En(this,\"firstquartile\")};g.fe=function(){En(this,\"midpoint\")};g.Je=function(){En(this,\"thirdquartile\")};g.Pc=function(){En(this,\"complete\");Fn(this,\"Stop\");this.g=!1;null!=this.a&&this.f&&!this.j&&(this.a.m(),this.j=!0)};g.Ec=function(a){var b=this.F;a=\"EVENT_VIDEO_\"+a.type.toUpperCase();this.a.A.C(\"updateVideoProgress\",[a,qn(this.b),this.b.a.currentTime]);F(M,ai(b,a))};var En=function(a,b,c){null!=a.a&&a.f&&(c&&(c=a.F,rh(a.a.b,\"Count\",c,\"EVENT_VIDEO_INTERACTION\"),F(M,ai(c,\"EVENT_VIDEO_INTERACTION\"))),c=a.F,b=\"EVENT_VIDEO_\"+b.toUpperCase(),rh(a.a.b,\"Count\",c,b),F(M,ai(c,b)))},Fn=function(a,b){if(null!=a.a&&a.f&&a.g){var c=a.F;rh(a.a.b,b,c,\"EVENT_VIDEO_VIEW_TIMER\");F(M,ai(c,\"EVENT_VIDEO_VIEW_TIMER\"))}};var Gn=function(a){I.call(this);this.c=a;this.a={};this.b=null;kj(u(this.g,this))};w(Gn,I);n(\"studio.video.Reporter\",Gn,void 0);var Hn=new B,In=function(a,b,c){var d=An(a);\"boolean\"==typeof c&&(d.h=c);mn(d.c);d.g=!0;d.f=!0;d.i=b;d.b=new vn(d.i);Bn(d);Hn.R(a)||Hn.set(a,new Gn(b))};Gn.attach=In;Gn.prototype.g=function(a){this.b=a;this.b.Gb(this.c)};Gn.prototype.l=function(){for(var a in this.a)this.c[a]=this.a[a];Gn.o.l.call(this)};var Jn=function(a){a=An(a);null==a.b||sn(a.b)||a.b.a.ended||(En(a,\"stop\",!1),Fn(a,\"Stop\"),a.g=!1);Cn(a,!1);a.f=!1;a.i=null;mn(a.c);a.b&&(a.b.ca(\"timeUpdate\",a.Ec,!1,a),a.b.dispose())};Gn.detach=Jn;var Kn=function(){};var Ln,Mn=function(){};w(Mn,Kn);var Nn=function(a){var b;a:{if(!a.a&&\"undefined\"==typeof XMLHttpRequest&&\"undefined\"!=typeof ActiveXObject){for(var c=[\"MSXML2.XMLHTTP.6.0\",\"MSXML2.XMLHTTP.3.0\",\"MSXML2.XMLHTTP\",\"Microsoft.XMLHTTP\"],d=0;d<c.length;d++){var e=c[d];try{new ActiveXObject(e);b=a.a=e;break a}catch(f){}}throw Error(\"Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed\");}b=a.a}return b?new ActiveXObject(b):new XMLHttpRequest};Ln=new Mn;var Pn=function(a,b){y(\"Blob\"in h,\"getBlob is not supported in this browser.\");b=b?pb(b):{};b.responseType=\"blob\";return On(\"GET\",a,b).then(function(a){return a.response})},On=function(a,b,c){return new zd(function(d,e){var f=c||{},l,m=f.Pe?Nn(f.Pe):Nn(Ln);try{m.open(a,b,!0)}catch(nc){e(new Qn(\"Error opening XHR: \"+nc.message,b))}m.onreadystatechange=function(){if(4==m.readyState){h.clearTimeout(l);var a;a:switch(m.status){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:a=!0;break a;default:a=!1}!a&&(a=0===m.status)&&(a=b.match(Df)[1]||null,!a&&h.self&&h.self.location&&(a=h.self.location.protocol,a=a.substr(0,a.length-1)),a=a?a.toLowerCase():\"\",a=!(\"http\"==a||\"https\"==a||\"\"==a));a?d(m):e(new Rn(m.status,b))}};m.onerror=function(){e(new Qn(\"Network error\",b))};var K;if(f.headers){for(var na in f.headers)K=f.headers[na],null!=K&&m.setRequestHeader(na,K);K=f.headers[\"Content-Type\"]}na=h.FormData&&!1;\"POST\"!=a||void 0!==K||na||m.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded;charset=utf-8\");f.withCredentials&&(m.withCredentials=f.withCredentials);f.responseType&&(m.responseType=f.responseType);f.ge&&m.overrideMimeType(f.ge);0<f.Ke&&(l=h.setTimeout(function(){m.onreadystatechange=ba;m.abort();e(new Sn(b))},f.Ke));try{m.send(null)}catch(nc){m.onreadystatechange=ba,h.clearTimeout(l),e(new Qn(\"Error sending XHR: \"+nc.message,b))}})},Qn=function(a,b){x.call(this,a+\", url=\"+b);this.url=b};w(Qn,x);Qn.prototype.name=\"XhrError\";var Rn=function(a,b){Qn.call(this,\"Request Failed, status=\"+a,b);this.status=a};w(Rn,Qn);Rn.prototype.name=\"XhrHttpError\";var Sn=function(a){Qn.call(this,\"Request timed out\",a)};w(Sn,Qn);Sn.prototype.name=\"XhrTimeoutError\";n(\"studio.sdk.video.VideoResource.getBlobForUrl\",function(a){return lj().then(function(b){b=b.Ca(a);return\"file:\"==window.location.protocol?Dd(Error(\"You cannot fetch the blob of a video when running locally. Run a local web server to test this creative (For example, python -m SimpleHTTPServer).\")):Ea(b,\"/itag/\")?Tn(Un(b)).then(Pn):Pn(b)})},void 0);var Tn=function(a){return On(\"HEAD\",a).then(function(b){return Vn(b)?On(\"GET\",a).then(function(a){return Tn(a.response)}):a})},Un=function(a){return Ea(a,\"/itag/\")&&!Ea(a,\"/alr/yes/\")?(a=a.split(\"/\"),a.splice(a.length-2,0,\"alr\",\"yes\"),a.join(\"/\")):a},Vn=function(a){a=a.getResponseHeader(\"Content-Type\");return Ea(a,\"text/plain\")};");
